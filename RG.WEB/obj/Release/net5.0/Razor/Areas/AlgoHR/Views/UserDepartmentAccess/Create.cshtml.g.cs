#pragma checksum "E:\TFS Project\RG_ERP\RG.WEB\Areas\AlgoHR\Views\UserDepartmentAccess\Create.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "5956e07906ea191944662aa4de6dc3a942c463c6"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Areas_AlgoHR_Views_UserDepartmentAccess_Create), @"mvc.1.0.view", @"/Areas/AlgoHR/Views/UserDepartmentAccess/Create.cshtml")]
namespace AspNetCore
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
#nullable restore
#line 1 "E:\TFS Project\RG_ERP\RG.WEB\Areas\_ViewImports.cshtml"
using RG.WEB;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "E:\TFS Project\RG_ERP\RG.WEB\Areas\_ViewImports.cshtml"
using RG.WEB.Models;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "E:\TFS Project\RG_ERP\RG.WEB\Areas\_ViewImports.cshtml"
using RG.Application.IdentityEntities;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "E:\TFS Project\RG_ERP\RG.WEB\Areas\_ViewImports.cshtml"
using Microsoft.AspNetCore.Identity;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "E:\TFS Project\RG_ERP\RG.WEB\Areas\_ViewImports.cshtml"
using System.Security.Claims;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "E:\TFS Project\RG_ERP\RG.WEB\Areas\_ViewImports.cshtml"
using RG.Application.Constants;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "E:\TFS Project\RG_ERP\RG.WEB\Areas\_ViewImports.cshtml"
using RG.Application.Common.Utilities;

#line default
#line hidden
#nullable disable
#nullable restore
#line 8 "E:\TFS Project\RG_ERP\RG.WEB\Areas\_ViewImports.cshtml"
using RG.Application.Contracts;

#line default
#line hidden
#nullable disable
#nullable restore
#line 9 "E:\TFS Project\RG_ERP\RG.WEB\Areas\_ViewImports.cshtml"
using Microsoft.AspNetCore.Antiforgery;

#line default
#line hidden
#nullable disable
#nullable restore
#line 10 "E:\TFS Project\RG_ERP\RG.WEB\Areas\_ViewImports.cshtml"
using Microsoft.AspNetCore.Http;

#line default
#line hidden
#nullable disable
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"5956e07906ea191944662aa4de6dc3a942c463c6", @"/Areas/AlgoHR/Views/UserDepartmentAccess/Create.cshtml")]
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"579f12fddde6ad7d5e2e7207f508f2b104c1f8c2", @"/Areas/_ViewImports.cshtml")]
    public class Areas_AlgoHR_Views_UserDepartmentAccess_Create : global::Microsoft.AspNetCore.Mvc.Razor.RazorPage<RG.Application.ViewModel.AlgoHR.Setup.UserDepartmentAccess.UserDepartmentAccessVM>
    {
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_0 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("class", new global::Microsoft.AspNetCore.Html.HtmlString("col-form-label"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_1 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("class", new global::Microsoft.AspNetCore.Html.HtmlString("form-control form-control-sm"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_2 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("class", new global::Microsoft.AspNetCore.Html.HtmlString("text-danger"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        #line hidden
        #pragma warning disable 0649
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperExecutionContext __tagHelperExecutionContext;
        #pragma warning restore 0649
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner __tagHelperRunner = new global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner();
        #pragma warning disable 0169
        private string __tagHelperStringValueBuffer;
        #pragma warning restore 0169
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager __backed__tagHelperScopeManager = null;
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager __tagHelperScopeManager
        {
            get
            {
                if (__backed__tagHelperScopeManager == null)
                {
                    __backed__tagHelperScopeManager = new global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager(StartTagHelperWritingScope, EndTagHelperWritingScope);
                }
                return __backed__tagHelperScopeManager;
            }
        }
        private global::Microsoft.AspNetCore.Mvc.TagHelpers.LabelTagHelper __Microsoft_AspNetCore_Mvc_TagHelpers_LabelTagHelper;
        private global::Microsoft.AspNetCore.Mvc.TagHelpers.SelectTagHelper __Microsoft_AspNetCore_Mvc_TagHelpers_SelectTagHelper;
        private global::Microsoft.AspNetCore.Mvc.TagHelpers.ValidationMessageTagHelper __Microsoft_AspNetCore_Mvc_TagHelpers_ValidationMessageTagHelper;
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
#nullable restore
#line 2 "E:\TFS Project\RG_ERP\RG.WEB\Areas\AlgoHR\Views\UserDepartmentAccess\Create.cshtml"
  
    ViewData[PageInfo.PageTitle] = "User Department & Section";
    ViewData[PageInfo.PageHeader] = "User Department & Section";

    Layout = "~/Views/Shared/_Layout.cshtml";

#line default
#line hidden
#nullable disable
            WriteLiteral(@"
<div class=""row"">
    <div class=""col-md-12 col-sm-12 col-lg-12"">
        <div class=""card mb-0"">
            <div class=""card-body  p-2"">
                <div class=""row"">
                    <div class=""col-sm-4"">
                        <div class=""form-group mb-0"">
                            ");
            __tagHelperExecutionContext = __tagHelperScopeManager.Begin("label", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "5956e07906ea191944662aa4de6dc3a942c463c66595", async() => {
            }
            );
            __Microsoft_AspNetCore_Mvc_TagHelpers_LabelTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.LabelTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_LabelTagHelper);
            __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_0);
#nullable restore
#line 16 "E:\TFS Project\RG_ERP\RG.WEB\Areas\AlgoHR\Views\UserDepartmentAccess\Create.cshtml"
__Microsoft_AspNetCore_Mvc_TagHelpers_LabelTagHelper.For = ModelExpressionProvider.CreateModelExpression(ViewData, __model => __model.CA_UserID);

#line default
#line hidden
#nullable disable
            __tagHelperExecutionContext.AddTagHelperAttribute("asp-for", __Microsoft_AspNetCore_Mvc_TagHelpers_LabelTagHelper.For, global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
            await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
            if (!__tagHelperExecutionContext.Output.IsContentModified)
            {
                await __tagHelperExecutionContext.SetOutputContentAsync();
            }
            Write(__tagHelperExecutionContext.Output);
            __tagHelperExecutionContext = __tagHelperScopeManager.End();
            WriteLiteral("\r\n                            ");
            __tagHelperExecutionContext = __tagHelperScopeManager.Begin("select", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "5956e07906ea191944662aa4de6dc3a942c463c68147", async() => {
            }
            );
            __Microsoft_AspNetCore_Mvc_TagHelpers_SelectTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.SelectTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_SelectTagHelper);
#nullable restore
#line 17 "E:\TFS Project\RG_ERP\RG.WEB\Areas\AlgoHR\Views\UserDepartmentAccess\Create.cshtml"
__Microsoft_AspNetCore_Mvc_TagHelpers_SelectTagHelper.For = ModelExpressionProvider.CreateModelExpression(ViewData, __model => __model.CA_UserID);

#line default
#line hidden
#nullable disable
            __tagHelperExecutionContext.AddTagHelperAttribute("asp-for", __Microsoft_AspNetCore_Mvc_TagHelpers_SelectTagHelper.For, global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
#nullable restore
#line 17 "E:\TFS Project\RG_ERP\RG.WEB\Areas\AlgoHR\Views\UserDepartmentAccess\Create.cshtml"
__Microsoft_AspNetCore_Mvc_TagHelpers_SelectTagHelper.Items = Model.DDLUser;

#line default
#line hidden
#nullable disable
            __tagHelperExecutionContext.AddTagHelperAttribute("asp-items", __Microsoft_AspNetCore_Mvc_TagHelpers_SelectTagHelper.Items, global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
            __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_1);
            await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
            if (!__tagHelperExecutionContext.Output.IsContentModified)
            {
                await __tagHelperExecutionContext.SetOutputContentAsync();
            }
            Write(__tagHelperExecutionContext.Output);
            __tagHelperExecutionContext = __tagHelperScopeManager.End();
            WriteLiteral("\r\n                            ");
            __tagHelperExecutionContext = __tagHelperScopeManager.Begin("span", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "5956e07906ea191944662aa4de6dc3a942c463c610169", async() => {
            }
            );
            __Microsoft_AspNetCore_Mvc_TagHelpers_ValidationMessageTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.ValidationMessageTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_ValidationMessageTagHelper);
#nullable restore
#line 18 "E:\TFS Project\RG_ERP\RG.WEB\Areas\AlgoHR\Views\UserDepartmentAccess\Create.cshtml"
__Microsoft_AspNetCore_Mvc_TagHelpers_ValidationMessageTagHelper.For = ModelExpressionProvider.CreateModelExpression(ViewData, __model => __model.CA_UserID);

#line default
#line hidden
#nullable disable
            __tagHelperExecutionContext.AddTagHelperAttribute("asp-validation-for", __Microsoft_AspNetCore_Mvc_TagHelpers_ValidationMessageTagHelper.For, global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
            __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_2);
            await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
            if (!__tagHelperExecutionContext.Output.IsContentModified)
            {
                await __tagHelperExecutionContext.SetOutputContentAsync();
            }
            Write(__tagHelperExecutionContext.Output);
            __tagHelperExecutionContext = __tagHelperScopeManager.End();
            WriteLiteral(@"
                        </div>

                    </div>
                    <div class=""col-sm-4"">

                    </div>
                    <div class=""col-sm-4"" style=""float:right;"">
                        <label class=""col-form-label""> Total Selected : </label>
                        <label id=""assignedDepartment"">0</label>
                    </div>
                </div>

            </div>
        </div>
    </div>
</div>
<div class=""row"">
    <div class=""col-md-12 col-sm-12 col-xs-12"">
        <div id=""grid"">
        </div>
    </div>
</div>
<div class=""row"">
    <div class=""col-md-12"">
        <label>&nbsp;</label>
        <div class=""form-group text-center"">
            <button type=""button"" class=""btn btn-sm btn-warning"" style=""display:none;"" id=""btnSave"">Save</button>
        </div>
    </div>
</div>
");
            DefineSection("scripts", async() => {
                WriteLiteral(@"

    <script type=""text/javascript"">
        let dataGrid;
        function saveSuccess(data) {
            $(""#btnSave"").attr(""disabled"", false);
            if (data.result == 1) {
                let dataGrid = $(""#grid"").dxDataGrid(""instance"");
                dataGrid.refresh()
                $.alert.open({
                    type: 'Success',
                    content: data.message,
                    callback: function () {
                        //$(""#hdnNotificationID"").val('');
                        //$('#notificationDetailModal').modal('hide');
                        //NotificationList();
                    }
                });
            }
            else {
                $.alert.open(""error"", data.message);

            }
        }

        function getUserEmployee() {
            HttpRequest.DropDownSelect2Group(""Get"", ""/AlgoHR/UserDepartmentAccess/GetDDLUserEmployee"", {}, 'CA_UserID', false);
        }
      
        function GetUserSection(userID) {
");
                WriteLiteral(@"        
            $(""#grid"").dxDataGrid({
                height: 700,
                remoteOperations: { paging: true, filtering: true, sorting: true, grouping: false, summary: false, groupPaging: false },
                dataSource: DevExpress.data.AspNet.createStore({
                    key: ""SectionID"",
                    loadUrl: ""/AlgoHR/UserDepartmentAccess/GetUserDepartmentAccessList"",
                    loadParams: {
                        userID: userID
                    }
                }),
                selection: {
                    mode: ""multiple"",
                    deferred: true
                },
                pager: { visible: true, showInfo: true, allowedPageSizes: [500], showPageSizeSelector: true, },
                paging: { pageSize: 1000 },
                filterRow: {
                    visible: true
                },
                onInitialized: function (e) {
                    assignedGrid = e.component;
                    calculateSt");
                WriteLiteral(@"atistics();
                },
                selectionFilter: [""ID"", "">"", ""0""],
                showBorders: true,
                columns: [
                    {
                        width: ""auto"",
                        caption: ""SL #"",
                        alignment: 'center',
                        headerCellTemplate: function (header, info) {
                            $('<div>').html(info.column.caption).css('font-weight', 'bold').appendTo(header);
                        },
                        cellTemplate: function (container, e) {
                            var index = e.rowIndex + 1;
                            container.text(index);
                        }

                    },
                    {
                        dataField: ""SectionID"",
                        visible: false,

                    },
                    {
                        dataField: ""CompanyName"",
                        alignment: 'center',
                        capt");
                WriteLiteral(@"ion: 'Company',
                        headerCellTemplate: function (header, info) {
                            $('<div>').html(info.column.caption).css('font-weight', 'bold').appendTo(header);
                        }
                    },
                    {
                        dataField: ""DivisionName"",
                        alignment: 'center',
                        caption: 'Division',
                        headerCellTemplate: function (header, info) {
                            $('<div>').html(info.column.caption).css('font-weight', 'bold').appendTo(header);
                        }
                    },
                    {
                        dataField: ""DepartmentName"",
                        alignment: 'center',
                        caption: 'Department',
                        headerCellTemplate: function (header, info) {
                            $('<div>').html(info.column.caption).css('font-weight', 'bold').appendTo(header);
                     ");
                WriteLiteral(@"   }
                    },
                    {
                        dataField: ""SectionName"",
                        alignment: 'center',
                        caption: 'Section',
                        headerCellTemplate: function (header, info) {
                            $('<div>').html(info.column.caption).css('font-weight', 'bold').appendTo(header);
                        }
                    },
                    {
                        dataField: ""isSelected"",
                        alignment: 'center',
                        caption: 'Selected',
                        headerCellTemplate: function (header, info) {
                            $('<div>').html(info.column.caption).css('font-weight', 'bold').appendTo(header);
                        }
                    }
                ]
            }).dxDataGrid(""instance"");


        }

        function calculateStatistics() {
            var _AssigneddataGrid = $(""#grid"").dxDataGrid(""instance"");
         ");
                WriteLiteral(@"   let assignedRows = 0;
            _AssigneddataGrid.getSelectedRowsData().then(function (selectedRowsData) { 
                selectedRowsData.map(function (sec) {
                    assignedRows = assignedRows + 1;
                });
               
            });
            $(""#assignedDepartment"").text(assignedRows);
        }

        $(function () {
            let assignedGrid;
            $(""#CA_UserID"").select2({ theme: 'bootstrap4' });
            getUserEmployee();

            $(""#CA_UserID"").change(function () {
                $(""#btnSave"").show();
                let userID = $(""#CA_UserID"").val();
                if (userID != """" && userID > 0) {
                    //  GetAllDivisionDepartmentSection(userID);
                    GetUserSection(userID);
                }
                var _AssigneddataGrid = $(""#grid"").dxDataGrid(""instance"");
             // ===== or when deferred selection is used =====
                
                _AssigneddataGrid.getSel");
                WriteLiteral(@"ectedRowsData().then(function (selectedRowsData) {
                    let assignedRows = 0;
                    selectedRowsData.map(function (sec) {
                        assignedRows = assignedRows + 1;
                    });
                    $(""#assignedDepartment"").text(assignedRows);

                }); 

                /*
                let assignedRows = 0;
                var selectedRowsData = _AssigneddataGrid.getSelectedRowsData();
                $.map(selectedRowsData, function (d, i) {
                    assignedRows = assignedRows + 1;
                })
                $(""#assignedDepartment"").text(assignedRows);
     */

            });

            $(""#btnSave"").click(function () {
                $(""#btnSave"").attr(""disabled"", true);
                debugger;
                /*
                let userID = $(""#CA_UserID"").val();
                var dataGrid = $(""#grid"").dxDataGrid(""instance"");
                var selectedRowsData = dataGrid.getSelectedRo");
                WriteLiteral(@"wsData();
                let selectedData = new Array();
                $.each(selectedRowsData, function (i, v) {
                    if (userID != """") {
                        let data = { CA_UserID: userID, Embro_CompanyID: v.CompanyID, DivisionID: v.DivisionID, DepartmentID: v.DepartmentID, SectionID: v.SectionID };
                        selectedData.push(data);
                    }
                });
                if (selectedData.length > 0) {
                    HttpRequest.Ajax(""POST"", '/AlgoHR/UserDepartmentAccess/Create', { ""selectedData"": selectedData }, saveSuccess, true);
                }
                */

                
                let selectedData = new Array();
                let userID = $(""#CA_UserID"").val();
                var _dataGrid = $(""#grid"").dxDataGrid(""instance"");
                _dataGrid.getSelectedRowsData().then(function (selectedRowsData) {
              
                    selectedRowsData.map(function (sec) {
                        l");
                WriteLiteral(@"et data = { CA_UserID: userID, Embro_CompanyID: sec.CompanyID, DivisionID: sec.DivisionID, DepartmentID: sec.DepartmentID, SectionID: sec.SectionID };
                        selectedData.push(data);
                    });

                    if (userID && selectedData.length > 0) {
                        HttpRequest.Ajax(""POST"", '/AlgoHR/UserDepartmentAccess/Create', { ""selectedData"": selectedData }, saveSuccess, true);
                    }
                });

            });
        });
    </script>
");
            }
            );
        }
        #pragma warning restore 1998
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<RG.Application.ViewModel.AlgoHR.Setup.UserDepartmentAccess.UserDepartmentAccessVM> Html { get; private set; }
    }
}
#pragma warning restore 1591
